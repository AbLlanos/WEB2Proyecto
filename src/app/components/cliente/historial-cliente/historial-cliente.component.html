<app-nav-bar></app-nav-bar>

<div class="historial-container animate-slide-down">
  <!-- Título con animación -->
  <div class="historial-header">
    <img src="https://mcd-landings-q-static.appmcdonalds.com/uploads-quality/48px_86952f326f.svg"
         alt="Logo McDonald's" class="logo-bounce" />
    <h2 class="historial-title">Historial de Pedidos Solicitados</h2>
  </div>

  <!-- Tabla con scroll y estilo vibrante -->
  <div class="historial-table-wrapper">
    <table class="historial-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Fecha</th>
          <th>Producto</th>
          <th>Cant.</th>
          <th>Precio</th>
          <th>IVA</th>
          <th>Subtotal</th>
          <th>Total Pedido</th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngFor="let pedido of pedidosUsuario; trackBy: trackById">
          <tr class="pedido-row">
            <td>{{ pedido.id }}</td>
            <td>{{ pedido.fecha | date:'short' }}</td>
            <td>{{ pedido.productos[0]?.nombre }}</td>
            <td>{{ pedido.productos[0]?.cantidad }}</td>
            <td>{{ pedido.productos[0]?.precioUnitario.toFixed(2) }}</td>
            <td>{{ (pedido.productos[0]?.iva * 100).toFixed(0) }}%</td>
            <td>{{ pedido.productos[0]?.subtotal.toFixed(2) }}</td>
            <td class="pedido-total">${{ pedido.total.toFixed(2) }}</td>
          </tr>
          <tr *ngFor="let prod of pedido.productos.slice(1)" class="producto-row">
            <td></td><td></td>
            <td>{{ prod.nombre }}</td>
            <td>{{ prod.cantidad }}</td>
            <td>{{ prod.precioUnitario.toFixed(2) }}</td>
            <td>{{ (prod.iva * 100).toFixed(0) }}%</td>
            <td>{{ prod.subtotal.toFixed(2) }}</td>
            <td></td>
          </tr>
        </ng-container>
      </tbody>
    </table>
  </div>
</div>

<app-footer></app-footer>
